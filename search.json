[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "IDEG Mediation Workshop",
    "section": "",
    "text": "Welcome to the IDEG workshop on Mediation Analysis and Directed Acyclic Graphs\nDuring this short workshop, you will be introduced to traditional mediation approaches before exploring the theory of causal mediation, as a method to investigate disease mechanisms in the context of diabetes.\nWe hope this will be the beginning of your journey in mediation analysis and open the door to more theory-grounded studies in aetiological diabetes epidemiology! The workshop is offered as part of the International Diabetes Epidemiology Group (IDEG) Trainee Workshop in Bangkok, Thailand, on 3 April 2025.\nThe workshop requires some pre-workshop preparation to install R and R Studio as well as some necessary packages and data. Furthermore, for those unfamiliar with Directed Acyclic Graphs (DAGs), some introductory reading and exercises are included in the pre-workshop materials.\nThe face-to-face workshop will consist of a combination of brief lectures and hands-on coding practice in R code-along sessions. We encourage students to discuss the materials and network during the entire Trainee Workshop. The instructors will be available to answer questions throughout the day.\nüóì April 3, 2025 üè® Bangkok, Thailand",
    "crumbs": [
      "Welcome to the IDEG workshop on Mediation Analysis and Directed Acyclic Graphs"
    ]
  },
  {
    "objectID": "index.html#schedule",
    "href": "index.html#schedule",
    "title": "IDEG Mediation Workshop",
    "section": "Schedule",
    "text": "Schedule\nWe will combine lectures with code-along sessions, group work, and discussions.\n\nApril 3, 2025\n\n\n\n\n\nTime\nContent\n\n\n\n\n12.45-12.55\nIntroduction to the workshop and the topic (DW)\n\n\n12.55-13.15\nTraditional mediation analysis (DW)\n\n\n13.15-13.30\nCausal mediation analysis: introduction (DW)\n\n\n13.30-13.45\nCausal mediation analysis: estimates (JZ)\n\n\n13.45-14.00\nGroup work + Reflections (JZ)\n\n\n\nInstructors: Daniel Witte (DW), Jie Zhang (JZ)",
    "crumbs": [
      "Welcome to the IDEG workshop on Mediation Analysis and Directed Acyclic Graphs"
    ]
  },
  {
    "objectID": "index.html#building-the-workshop",
    "href": "index.html#building-the-workshop",
    "title": "IDEG Mediation Workshop",
    "section": "Building the workshop",
    "text": "Building the workshop\nThe worskhop material was created using Quarto to write the lessons and create the book format, GitHub to host the Git repository of the material, and GitHub Actions with Netlify to create and host the website. The materials for this workshop are adapted from the Mediation Analysis Course. You can find the full materials for that course on the steno-aarhus/mediation-analysis-course GitHub repository.",
    "crumbs": [
      "Welcome to the IDEG workshop on Mediation Analysis and Directed Acyclic Graphs"
    ]
  },
  {
    "objectID": "index.html#licensing",
    "href": "index.html#licensing",
    "title": "IDEG Mediation Workshop",
    "section": "Re-use and licensing",
    "text": "Re-use and licensing\n\nThe workshop is licensed under the Creative Commons Attribution 4.0 International License so the material can be used, re-used, and modified, as long as there is attribution to this source.",
    "crumbs": [
      "Welcome to the IDEG workshop on Mediation Analysis and Directed Acyclic Graphs"
    ]
  },
  {
    "objectID": "index.html#acknowledgements",
    "href": "index.html#acknowledgements",
    "title": "IDEG Mediation Workshop",
    "section": "Acknowledgements",
    "text": "Acknowledgements\nThis workshop is adapted from the ‚ÄòMediation Analysis Course‚Äô developed by Daniel B. Ibsen, Omar Silverman, Jie Zhang from Steno Diabetes Center Aarhus in Denmark, and Nima Hejarzi and Ivan Diaz from the US, which was sponsored by the Danish Diabetes and Endocrine Academy.",
    "crumbs": [
      "Welcome to the IDEG workshop on Mediation Analysis and Directed Acyclic Graphs"
    ]
  },
  {
    "objectID": "preamble/precourse.html",
    "href": "preamble/precourse.html",
    "title": "1¬† Pre-workshop tasks",
    "section": "",
    "text": "1.1 List of tasks\nIn order to participate in this workshop actively, it is important that you complete the pre-workshop tasks.\nThese tasks are designed to make it easier for everyone to start the workshop with everything ready to go.\nDepending on your skills and knowledge, these tasks could take between 1 to 2 hours to finish.\nIf you have any issues, please write us an email or ask during the registration on the morning of the first day of the workshop.\nHere‚Äôs a quick overview of the tasks you need to do. Specific details about them are found as you work through this section.",
    "crumbs": [
      "Preamble",
      "<span class='chapter-number'>1</span>¬† <span class='chapter-title'>Pre-workshop tasks</span>"
    ]
  },
  {
    "objectID": "preamble/precourse.html#list-of-tasks",
    "href": "preamble/precourse.html#list-of-tasks",
    "title": "1¬† Pre-workshop tasks",
    "section": "",
    "text": "Note\n\n\n\n\nInstall the necessary programs and the right version of the programs.\nGet familiar with Directed Acyclic Graphs.\nDownload the data or the repository in Section 1.4\nRead the Code of Conduct",
    "crumbs": [
      "Preamble",
      "<span class='chapter-number'>1</span>¬† <span class='chapter-title'>Pre-workshop tasks</span>"
    ]
  },
  {
    "objectID": "preamble/precourse.html#sec-intall-r-packages",
    "href": "preamble/precourse.html#sec-intall-r-packages",
    "title": "1¬† Pre-workshop tasks",
    "section": "1.2 Installing programs",
    "text": "1.2 Installing programs\nIf you are a workshop attendee and have any trouble with installation locally, please reach out to us directly!\n1Ô∏è‚É£ Install R (Latest Version): If you have not already done so, please download and install the latest version of R based on your operating system:\nhttps://cran.r-project.org/\n2Ô∏è‚É£ Install RStudio: This is a separate program that provides an intuitive user interface with R.\nVisit RStudio Download Page: https://posit.co/products/open-source/rstudio/ Click ‚ÄúDownload RStudio‚Äù and follow the instructions.\n3Ô∏è‚É£ Check Your R Version If you already have R installed, check your version to ensure compatibility:\nR.Version()\nIf your R version is 4.3.1 or later, you‚Äôre good to go!\n4Ô∏è‚É£ Install Required R Packages: To ensure you have all necessary packages, run the following command in R:\n\ninstall.packages(\"pak\")\npak::pkg_install(\"tidyverse\")\npak::pkg_install(\"DiagrammeR\")\npak::pkg_install(\"downlit\")\npak::pkg_install(\"furrr\")\npak::pkg_install(\"here\")\npak::pkg_install(\"knitr\")\npak::pkg_install(\"mediation\")\npak::pkg_install(\"NetCoupler\")\npak::pkg_install(\"rmarkdown\")\npak::pkg_install(\"survival\")\npak::pkg_install(\"xml2\")\npak::pkg_install(\"here\")\npak::pkg_install(\"BS1125/CMAverse\")\npak::pkg_install(\"ggdag\")\npak::pkg_install(\"ggplot2\")\n\nIf installation of a package does not work using the ‚Äúpak‚Äù package, then use:\ninstall.packages(\"name-of-package\")\nIf you have issues with the CMA package, you could also try this:\ninstall.packages(\"devtools\")\ndevtools::install_github(\"BS1125/CMAverse\")",
    "crumbs": [
      "Preamble",
      "<span class='chapter-number'>1</span>¬† <span class='chapter-title'>Pre-workshop tasks</span>"
    ]
  },
  {
    "objectID": "preamble/precourse.html#brush-up-on-your-dag-knowledge-before-the-workshop",
    "href": "preamble/precourse.html#brush-up-on-your-dag-knowledge-before-the-workshop",
    "title": "1¬† Pre-workshop tasks",
    "section": "1.3 Brush up on your DAG knowledge before the workshop",
    "text": "1.3 Brush up on your DAG knowledge before the workshop\nSome concepts in the mediation workshop are explained using Directed Acyclic Graphs. It is important that you understand what they are and how we use them in observational epidemiology. We have put together a very general introduction to DAGs. If you have not worked with DAGs before, please take some time to go through this introduction to DAGs to familiarize yourself with them.",
    "crumbs": [
      "Preamble",
      "<span class='chapter-number'>1</span>¬† <span class='chapter-title'>Pre-workshop tasks</span>"
    ]
  },
  {
    "objectID": "preamble/precourse.html#sec-download-data",
    "href": "preamble/precourse.html#sec-download-data",
    "title": "1¬† Pre-workshop tasks",
    "section": "1.4 Download the data and repository",
    "text": "1.4 Download the data and repository\nYou can follow all the teaching material on this website. For the exercises, you will need to use the datasets we have created. You can either download the entire repository (recommended) or simply download the data from our github. We recommend that you do not do this before March 31, in the afternoon as we will making updates until then.\n\n1.4.1 Download repository\n\nOpen a new session of R in RStudio. If you are in a project, go out of that project.\nUsing RStudio‚Äôs New Project menu item: ‚ÄúFile -&gt; New Project -&gt; Version control -&gt; Git‚Äù\nKeeping RStudio open, open your browser and go to our repository\nThen, Click on the green ‚Äúcode‚Äù icon and copy-paste\nNow go back to R and put in what you just copy-pasted under ‚ÄúRepository URL.‚Äù You should also select where this project should.\nClick ‚Äúcreate project‚Äù and you should now have all materials there.\n\n\n\n1.4.2 Download the data\nIf you want to only download the workshop data. You can go to here for the NHANES data. Click ‚Äúdownload raw file‚Äù in the top right corner after you have clicked on the specific file.",
    "crumbs": [
      "Preamble",
      "<span class='chapter-number'>1</span>¬† <span class='chapter-title'>Pre-workshop tasks</span>"
    ]
  },
  {
    "objectID": "preamble/precourse.html#sec-code-of-conduct",
    "href": "preamble/precourse.html#sec-code-of-conduct",
    "title": "1¬† Pre-workshop tasks",
    "section": "1.5 Code of conduct",
    "text": "1.5 Code of conduct\nAs contributors and maintainers of this project, we pledge to respect all people who contribute through reporting issues, posting suggestions, updating any material, submitting pull requests, and other activities.\nWe are committed to making participation in this project a harassment-free experience for everyone, regardless of level of experience, gender, gender identity and expression, sexual orientation, disability, personal appearance, body size, race, ethnicity, age, or religion.\nExamples of unacceptable behavior by participants include the use of sexual language or imagery, derogatory comments or personal attacks, trolling, public or private harassment, insults, or other unprofessional conduct.\nProject maintainers have the right and responsibility to remove, edit, or reject comments, commits, code, wiki edits, issues, and other contributions that are not aligned to this Code of Conduct. Project maintainers who do not follow the Code of Conduct may be removed from the project team.\nInstances of abusive, harassing, or otherwise unacceptable behavior may be reported by opening an issue or contacting one or more of the project maintainers.\nThis Code of Conduct is adapted from the Contributor Covenant (https://contributor-covenant.org), version 1.0.0, available at https://contributor-covenant.org/version/1/0/0/\n\n\n\n\n\n\nSee you at the workshop!\n\n\n\nWe look forward to meeting you at the workshop in Bangkok!",
    "crumbs": [
      "Preamble",
      "<span class='chapter-number'>1</span>¬† <span class='chapter-title'>Pre-workshop tasks</span>"
    ]
  },
  {
    "objectID": "preamble/Introduction-to-DAGs.html",
    "href": "preamble/Introduction-to-DAGs.html",
    "title": "2¬† Directed Acyclic Graphs (DAG)",
    "section": "",
    "text": "2.1 What is a Directed Acyclic Graph (DAG)?\nA Directed Acyclic Graph (DAG) is a visual tool to represent putative causal relationships between variables in observational research. In the case of etiological epidemiology, we are interested in assessing the causal effect of an exposure on an outcome. Before embarking on statistical analyses DAGs can help us map our prior knowledge and assumptions about the various mechanisms that influence or explain the causal effect we are interested in. DAGs can help to guide us in the design of our study, the choice of which data to collect, and in how to set up our statistical analysis to adequately control for known sources of bias and confounding.\nIn preparation for our workshop on mediation analysis, it is important that you understand the basic concepts and notations used when drawing and communicating about our causal assumptions using DAGs.",
    "crumbs": [
      "Preamble",
      "<span class='chapter-number'>2</span>¬† <span class='chapter-title'>Directed Acyclic Graphs (DAG)</span>"
    ]
  },
  {
    "objectID": "preamble/Introduction-to-DAGs.html#simple-example",
    "href": "preamble/Introduction-to-DAGs.html#simple-example",
    "title": "2¬† Directed Acyclic Graphs (DAG)",
    "section": "2.2 Simple example",
    "text": "2.2 Simple example\nDAGs help us describe our hypotheses and assumptions about a system of causes and effects. Let‚Äôs think of a simple example:\n\nX represents a light switch (the cause)\nY represents whether a light bulb is on or off (the effect)\n\nIn observational epidemiology we often also see the cause referred to as the exposure or determinant. The effect is often referred to as the outcome.\nWhen we flip the switch (X):\n\nSwitch up ‚Üí Light on\nSwitch down ‚Üí Light off\n\nThis simple cause-effect relationship can be drawn as: X ‚Üí Y.\nDAGs consist of two basic elements:\n\nNodes: Points representing variables (like X and Y)\nEdges: Arrows representing known or suspected causal relationships between variables (like X ‚Üí Y)\n\nA¬†directed path¬†(often simply referred to as a path) is any arrow-based route between two variables on the graph.\n\n\n\n\n\n\n\n\n\nNow let‚Äôs introduce another variable Z into the graph. The path is X‚ÜíY‚ÜíZ.\n\nAncestor: A variable that influences another (X is an ancestor of Y)\n\n\n\nDescendant: A variable influenced by another (Z is a descendant of Y)\n\nNote that both X and Y are ancestors of Z, and both Y and Z are descendants of X. In other words, all variables that influence a given variable are its ancestors and all variables that are influenced by it are its descendants, even if they are only connected indirectly.\n\n\n\n\n\n\n\n\n\nWe can use DAGs to illustrate some key terminology in epidemiology.",
    "crumbs": [
      "Preamble",
      "<span class='chapter-number'>2</span>¬† <span class='chapter-title'>Directed Acyclic Graphs (DAG)</span>"
    ]
  },
  {
    "objectID": "preamble/Introduction-to-DAGs.html#confounders",
    "href": "preamble/Introduction-to-DAGs.html#confounders",
    "title": "2¬† Directed Acyclic Graphs (DAG)",
    "section": "2.3 Confounders:",
    "text": "2.3 Confounders:\nA confounder is a cause (ancestor) of both the exposure and the outcome of interest which is not on the causal pathway between the two. It is a problem in observational epidemiology because confounding may cause a spurious association between exposure and outcome. This means that we need to account for potential confounders before we can make a causal inference about the relationship between exposure and outcome. In a DAG, we can represent a confounder by a node (Z) with arrows pointing toward both X and Y, indicating that it is an ancestor of both the exposure X and the outcome Y.",
    "crumbs": [
      "Preamble",
      "<span class='chapter-number'>2</span>¬† <span class='chapter-title'>Directed Acyclic Graphs (DAG)</span>"
    ]
  },
  {
    "objectID": "preamble/Introduction-to-DAGs.html#mediators",
    "href": "preamble/Introduction-to-DAGs.html#mediators",
    "title": "2¬† Directed Acyclic Graphs (DAG)",
    "section": "2.4 Mediators:",
    "text": "2.4 Mediators:\nA mediator is a variable that lies on the causal pathway between the exposure (X) and the outcome (Y). In a DAG, it is a descendant of X and an ancestor of Y, meaning that X influences Y, at least in part, through the mediator (Z).",
    "crumbs": [
      "Preamble",
      "<span class='chapter-number'>2</span>¬† <span class='chapter-title'>Directed Acyclic Graphs (DAG)</span>"
    ]
  },
  {
    "objectID": "preamble/Introduction-to-DAGs.html#colliders",
    "href": "preamble/Introduction-to-DAGs.html#colliders",
    "title": "2¬† Directed Acyclic Graphs (DAG)",
    "section": "2.5 Colliders:",
    "text": "2.5 Colliders:\nA collider is a variable that is a consequence (is caused by) both the exposure and the outcome of interest. In a DAG, a collider has both edges pointing into its node. In the DAG below Z is a collider because it is a descendant of both the exposure X and the outcome Y.\n\n\n\n\n\n\n\n\n\nIt is important to identify potential colliders, because adjusting for or stratifying by a them (conditioning on a collider) can introduce a spurious association between the exposure and the outcome.\nConsider the relationship between Body Mass Index (BMI) and Type 2 Diabetes (T2D). Both BMI and T2D are causes of increased incidence of Myocardial Infarction (MI), making MI a collider in this DAG. If we were to study the causal effect of BMI on T2D only in people who have a history of MI, we would be conditioning on a collider. We might then find a spurious association (could be stronger, weaker or even inverse) between BMI and T2D. In order to avoid this introduction of bias we should avoid conditioning (selecting) on a collider.",
    "crumbs": [
      "Preamble",
      "<span class='chapter-number'>2</span>¬† <span class='chapter-title'>Directed Acyclic Graphs (DAG)</span>"
    ]
  },
  {
    "objectID": "preamble/Introduction-to-DAGs.html#dags-must-be-acyclic",
    "href": "preamble/Introduction-to-DAGs.html#dags-must-be-acyclic",
    "title": "2¬† Directed Acyclic Graphs (DAG)",
    "section": "2.6 DAGs must be acyclic:",
    "text": "2.6 DAGs must be acyclic:\nA DAG must be acyclic (the A in DAG), meaning that it does not contain any feedback loops. In other words, a variable cannot be its own descendant (not even via mediators). The examples discussed so far are all valid DAGs because they maintain this property. However, the following example is not a DAG, as it contains a cycle:\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nTip: Read this reference for more background!\n\n\n\nThis brief introduction to DAGs follows an excellent tutorial. Read this reference to get a bit more background than we can cover here.",
    "crumbs": [
      "Preamble",
      "<span class='chapter-number'>2</span>¬† <span class='chapter-title'>Directed Acyclic Graphs (DAG)</span>"
    ]
  },
  {
    "objectID": "preamble/Introduction-to-DAGs.html#create-your-own-dag",
    "href": "preamble/Introduction-to-DAGs.html#create-your-own-dag",
    "title": "2¬† Directed Acyclic Graphs (DAG)",
    "section": "2.7 Create your own DAG",
    "text": "2.7 Create your own DAG\nThere are a number of tools we can use to create and analyze DAGs.¬†DAGitty¬†is a popular tool for working with DAGs. Notably, DAGitty has a graphical interface we can use to create, edit, and analyze DAGs directly in our web browser. We can access DAGitty in our browser by navigating to¬†https://www.dagitty.net/¬†and clicking on¬†Launch DAGitty online in your browser.\nYou can also use R package ggdag to create DAGs.\n\n# Load the packages we will need below\nlibrary(dplyr, warn.conflicts = FALSE)\nlibrary(ggdag, warn.conflicts = FALSE)\nlibrary(ggplot2)\n\n\n# Create a DAG called chain\nchain &lt;- dagify(\n  y ~ x # The form is effect ~ cause\n) \n# Print the values stored in 'chain' to the screen\nchain\n\ndag {\nx\ny\nx -&gt; y\n}\n\n# Plot the 'chain' dag and print it to the screen\nggdag(chain)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nTip: Use DAGs to map out your research question!\n\n\n\nDrawing, understanding and communicating epidemiological considerations with DAGs can be complex. The best way to learn is by making your own DAGs representing a topic you work with or know well. For example, follow the steps in the exercise below and if you have time try it once more with other variables.\n\n\n\n\n\n\n\n\nExcercise: draw a DAG\n\n\n\nSuppose your research question is: What is the relationship between physical activity (PA) and Type 2 Diabetes (T2D)? We hypothesize that increased physical activity reduces the risk of developing T2D.\n\nExposure: Physical activity\nOutcome: Type 2 Diabetes\n\nThe dataset includes age, sex, ethnicity (Eth), physical activity (PA), Type 2 Diabetes (T2D) and history of CVD (CVD). Using these variables, construct a Directed Acyclic Graph (DAG) to illustrate potential causal relationships and identify possible confounders, mediators and colliders. You may also consider using U to represent unknown factors.\nCompare and discuss your DAG with your peers to identify similarities, differences, and potential improvements.\nHow would the DAG change if you are just starting to plan a study?\nDuring the study planning phase, the structure of the DAG might evolve based on additional considerations. For example:\nIdentifying further potential confounders: These are variables that may affect both the exposure (physical activity) and the outcome (Type 2 diabetes), and should therefore be measured and adjusted for. Potential confounders could include factors such as diet, neighborhood environment, income, and genetic predisposition.\nIdentifying furhter potential colliders: These are variables that are dependent on both the exposure (physical activity) and the outcome (Type 2 diabetes). We should avoid selecting (stratifying) or otherwise conditioning on colliders. Can you think of 1 or 2 additional potential colliders?",
    "crumbs": [
      "Preamble",
      "<span class='chapter-number'>2</span>¬† <span class='chapter-title'>Directed Acyclic Graphs (DAG)</span>"
    ]
  },
  {
    "objectID": "preamble/Introduction-to-DAGs.html#take-home-messages",
    "href": "preamble/Introduction-to-DAGs.html#take-home-messages",
    "title": "2¬† Directed Acyclic Graphs (DAG)",
    "section": "2.8 Take home messages",
    "text": "2.8 Take home messages\nDAGs are a visual tool that helps us map out and communicate our assumptions about a causal relationships.\nThe are very useful in the design and analysis phases of observational research, as they force researchers to explicitly state their assumptions about how various variables are causally linked to each other.\nDAGS help researchers to identify whether causal effects can be estimated, and which adjustments are necessary, optional or should be avoided to obtain unbiased results.",
    "crumbs": [
      "Preamble",
      "<span class='chapter-number'>2</span>¬† <span class='chapter-title'>Directed Acyclic Graphs (DAG)</span>"
    ]
  },
  {
    "objectID": "preamble/Introduction-to-DAGs.html#recommended-reading",
    "href": "preamble/Introduction-to-DAGs.html#recommended-reading",
    "title": "2¬† Directed Acyclic Graphs (DAG)",
    "section": "2.9 Recommended reading",
    "text": "2.9 Recommended reading\nDigitale, J.C. et al.¬†(2022) Tutorial on directed acyclic graphs. Journal of Clinical Epidemiology, Volume 142, 264 - 267\nRohrer, J. M. (2017). Thinking Clearly About Correlations and Causation: Graphical Causal Models for Observational Data.\nPearl, J., & Mackenzie, D. (2018). The book of why: the new science of cause and effect. Basic Books.\nRoberts, S. (2018). Robust, causal and incremental approaches to investigating linguistic adaptation. Frontiers in Psychology, 9, 166.",
    "crumbs": [
      "Preamble",
      "<span class='chapter-number'>2</span>¬† <span class='chapter-title'>Directed Acyclic Graphs (DAG)</span>"
    ]
  },
  {
    "objectID": "sessions/welcome.html",
    "href": "sessions/welcome.html",
    "title": "3¬† Mediation Analysis",
    "section": "",
    "text": "3.1 Welcome\nWelcome to the short workshop on Directed Acyclic Graphs (DAGs) and mediation analysis!\nInstrctors: Daniel Witte, Jie Zhang\nTime duration: 75 mins",
    "crumbs": [
      "Sessions",
      "<span class='chapter-number'>3</span>¬† <span class='chapter-title'>Mediation Analysis</span>"
    ]
  },
  {
    "objectID": "sessions/welcome.html#important-things-before-the-course",
    "href": "sessions/welcome.html#important-things-before-the-course",
    "title": "3¬† Mediation Analysis",
    "section": "4.1 Important things before the course",
    "text": "4.1 Important things before the course\nTo make the most of our training course in Bangkok, please complete the pre-course tasks before you arrive. This will ensure we can start our sessions smoothly and dive right into the content!",
    "crumbs": [
      "Sessions",
      "<span class='chapter-number'>3</span>¬† <span class='chapter-title'>Mediation Analysis</span>"
    ]
  },
  {
    "objectID": "sessions/welcome.html#course-outline-1",
    "href": "sessions/welcome.html#course-outline-1",
    "title": "3¬† Mediation Analysis",
    "section": "4.2 Course outline",
    "text": "4.2 Course outline\n\nMotivation\nTraditional mediation analysis\nIntroduction to causal mediation analysis\nPerform causal mediation analysis using R software\nInterpret results from causal mediation analysis",
    "crumbs": [
      "Sessions",
      "<span class='chapter-number'>3</span>¬† <span class='chapter-title'>Mediation Analysis</span>"
    ]
  },
  {
    "objectID": "sessions/welcome.html#acknowledgement",
    "href": "sessions/welcome.html#acknowledgement",
    "title": "3¬† Mediation Analysis",
    "section": "4.3 Acknowledgement",
    "text": "4.3 Acknowledgement\nThis course is developed based on ‚ÄòMediation Analysis Course‚Äô developed by Daniel B. Ibsen, Omar Silverman, Jie Zhang from Steno Diabetes Center Aarhus in Denmark, and Nima Hejarzi and Ivan Diaz from the US, which is sponsored by the Danish Diabetes and Endocrine Academy.\nThe repository contains the lesson, lecture, and assignment material for the course, including the website source files and other associated course administration files. You can always go to check the website to learn more about mediation.",
    "crumbs": [
      "Sessions",
      "<span class='chapter-number'>3</span>¬† <span class='chapter-title'>Mediation Analysis</span>"
    ]
  },
  {
    "objectID": "sessions/motivation.html",
    "href": "sessions/motivation.html",
    "title": "4¬† Motivation",
    "section": "",
    "text": "4.1 Mediation analysis in Epidemiology\nWhat is your motivation for this course on mediation analysis?\nMediation analysis is the study of pathways and mechanisms through which an exposure or intervention impacts an outcome. In clinical and epidemiological research, the primary focus is often on determining whether a specific intervention has an effect on a disease or health outcome. Once this effect is established, the next natural question is to explore the ‚Äúblack box‚Äù‚Äîthe underlying mechanisms that explain how the intervention (or exposure) leads to the observed outcome. As we are not only interested in whether an intervention works, but how it works. ([@vanderweele_mediation_2016]).\nMediation analysis provides an answer to this HOW question, by uncovering the pathways and mechanisms that explain the causal relationship between the exposure (e.g., intervention or treatment) and the outcome. By doing so, mediation analysis helps to open the black box, showing not only if an intervention works but how it works, and guiding more effective and targeted interventions.",
    "crumbs": [
      "Sessions",
      "<span class='chapter-number'>4</span>¬† <span class='chapter-title'>Motivation</span>"
    ]
  },
  {
    "objectID": "sessions/motivation.html#motivation-for-mediation-analysis",
    "href": "sessions/motivation.html#motivation-for-mediation-analysis",
    "title": "4¬† Motivation",
    "section": "4.2 Motivation for mediation analysis",
    "text": "4.2 Motivation for mediation analysis\n\nExplanation and Understanding:\nUnpacking how and why certain factors (e.g., physical activity) impact outcomes (e.g., diabetes risk) through intermediary variables (e.g., weight loss).\nExample: Does body mass index mediate the relationship between diet and type 2 diabetes in mid-life?\nConfirmation and Refutation of Theory:\nTesting theories about the mechanisms behind health outcomes and determining whether certain factors mediate the relationships between exposures and outcomes.\nExample: Is the relationship between lower socioeconomic status and cardiovascular disease explained (mediated) through high allostatic load?\nRefining Interventions:\nUsing mediation analysis to improve the effectiveness of interventions by targeting key mediators, leading to better and more sustainable outcomes.\nExample: Let‚Äôs consider the evidence from the landmark prevention trials. The Diabetes Prevention Programme @knowler_reduction_2002, The Diabetes Prevention Study @tuomilehto_prevention_2001, and The Da Quin study @pan_effects_1997. These studies randomized high risk individuals to either metformin or a lifestyle intervention consisting of a physical activity or physical activity + diet. The main finding was a ~58% lower risk of incidence type 2 diabetes in the lifestyle intervention group compared to the metformin group.\n\n\n\n\n\n\n\nWe might be interested in further refining the intervention so as to increase the magnitude of the effect. This might be done by altering or improving components of the intervention that target a particular mechanism for the outcome and discarding those components of which perhaps are not relevant for the outcome.\nWhen implementing the same lifestyle interventions in real world settings, lifestyle interventions show smaller effect and the long-term adoption and sustainability over time were some of the challenges to the effectiveness of these prevention efforts",
    "crumbs": [
      "Sessions",
      "<span class='chapter-number'>4</span>¬† <span class='chapter-title'>Motivation</span>"
    ]
  },
  {
    "objectID": "sessions/motivation.html#motivations-for-running-this-course",
    "href": "sessions/motivation.html#motivations-for-running-this-course",
    "title": "4¬† Motivation",
    "section": "4.3 Motivations for running this course",
    "text": "4.3 Motivations for running this course\nThe methodological framework for conducting mediation analysis has evolved rapidly in recent years, making it a crucial tool for understanding complex relationships in research. Initially rooted in basic regression techniques, mediation analysis has advanced into causal mediation analysis, enabling researchers to unravel the intricate pathways between exposures, mediators, and outcomes.\nThis short course aims to introduce the basic statistical framework, key assumptions, and practical applications of both traditional and modern mediation analysis techniques. Through real-world data examples, we‚Äôll explore how mediation analysis can enhance your research and understanding of causal relationships.\nDespite its growing importance, mediation analysis is often used incorrectly. A recent systematic review on the reporting quality of studies applying mediation analysis revealed that many studies provide incomplete reporting, which hinders both reproducibility and the translation of findings into practice ([@rrn_systematic_2022]).\nOur goal is for you to learn how to apply mediation analysis correctly and leverage it as a powerful tool to advance your research. By improving the quality and rigor of mediation analysis in your work, you can ensure more reliable findings and meaningful insights.",
    "crumbs": [
      "Sessions",
      "<span class='chapter-number'>4</span>¬† <span class='chapter-title'>Motivation</span>"
    ]
  },
  {
    "objectID": "sessions/traditional-mediation-analysis.html",
    "href": "sessions/traditional-mediation-analysis.html",
    "title": "5¬† Traditional mediation analysis",
    "section": "",
    "text": "5.1 Traditional approaches for mediation analysis\nThe purpose of mediation analysis is to determine if the effect of a treatment (A) on an outcome (Y) can be explained by a third mediating variable (M). Thus, mediation analysis not only answers whether two variables are related, but also why.\nThis can be visualized in the following figures.\nOverall relationship between A and Y:\nRelationship between A and Y through M:\nThe two traditional approaches to mediation analysis are the difference method and the product method; also known as the Baron & Kenny-method @baron_moderatormediator_1986.\nThe traditional approach use these equations for mediator and outcome (for the case of a continuous mediator and a continuous outcome)\nMediator-model:\n\\(E(M|A=a, C=c) = \\beta_0 + \\beta_1a + \\beta_2c\\) (3.1)\nOutcome model with adjustment for mediator:\n\\(E(Y|A=a, M=m, C=c) = \\theta_0 + \\theta_1a + \\theta_2m + \\theta4c\\) (3.2)\nOutcome model without adjustment for mediator:\n\\(E(Y|A=a, C=c) = \\theta_0' + \\theta_1'a + \\theta4'c\\) (3.3)\nNote:\nNote: The terms ‚Äòmediation effect‚Äô and ‚Äòindirect effect‚Äô are used synonymously.",
    "crumbs": [
      "Sessions",
      "<span class='chapter-number'>5</span>¬† <span class='chapter-title'>Traditional mediation analysis</span>"
    ]
  },
  {
    "objectID": "sessions/traditional-mediation-analysis.html#traditional-approaches-for-mediation-analysis",
    "href": "sessions/traditional-mediation-analysis.html#traditional-approaches-for-mediation-analysis",
    "title": "5¬† Traditional mediation analysis",
    "section": "",
    "text": "total effect=\\(\\theta_1'\\) , that is the total effect of the independent variable on the dependent variable\ndirect effect=\\(\\theta_1\\)‚Äô, that is the effect of the independent variable on the dependent variable that is not mediated by the mediator\nmediation effect=\\(\\beta1*\\theta_2\\) (the product method)\nmediation effect=‚Äô\\(\\theta_1'-\\theta_1\\) (the difference method)",
    "crumbs": [
      "Sessions",
      "<span class='chapter-number'>5</span>¬† <span class='chapter-title'>Traditional mediation analysis</span>"
    ]
  },
  {
    "objectID": "sessions/traditional-mediation-analysis.html#an-example",
    "href": "sessions/traditional-mediation-analysis.html#an-example",
    "title": "5¬† Traditional mediation analysis",
    "section": "5.2 An example",
    "text": "5.2 An example\nIn this session, we will use an example to address a mediation research question using both traditional approaches.\nIt has been suggested that physical activity is associated with improved cardiovascular health. The predominant hypothesis is that physical activity contributes to weight reduction, which in turn improves cardiovascular function and lowers resting pulse rate. Therefore, we aim to investigate the extent to which the effect of physical activity on resting pulse rate is mediated by BMI.\nThe situation is depicted by below figure.\nHow much does BMI explain the relation between physical activity and pulse rate?\n\n\n\n\n\n\n\n\n\n\n\n\nExample Dataset: A Brief Overview\n\n\n\nWe‚Äôll explore the relationship between physical activity and pulse in the National Health and Nutrition Examination Survey (NHANES) dataset, which has been modified for this course with simulated variables.\nTo try this out in practice, we load the NHANES dataset, only keep the variables we need for the example.\nThe variables used in the dataset:\n\nexposure of interest (a): physical activity (continuous variable)\noutcome (y): Pulse (continuous variable)\nmediator (m): BMI (continuous variable)\n\nNote that the example is created to demonstrate the methods, and there is no clinical relevance of the results. For the convenience of analysis, we have transformed the mediator (m) and outcome variable (y) so that they follow a normal distribution.\nFour demographic variables are considered in the analysis: age, gender, education, and smoking. We assume that adjusting for these four confounding is sufficient to block the backdoor paths. Further discussion on confounding adjustment will be covered in the following session.\n\n\n\n# load the data\nnhanes &lt;- read_csv(here::here(\"data/NHANES.csv\"))\n\nRows: 10000 Columns: 76\n‚îÄ‚îÄ Column specification ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\nDelimiter: \",\"\nchr (31): SurveyYr, Gender, AgeDecade, Race1, Race3, Education, MaritalStatu...\ndbl (45): ID, Age, AgeMonths, HHIncomeMid, Poverty, HomeRooms, Weight, Lengt...\n\n‚Ñπ Use `spec()` to retrieve the full column specification for this data.\n‚Ñπ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\nlibrary(dplyr)\n# keep the variables used in the analyses\ndata &lt;- nhanes %&gt;%\n  dplyr::select(\n    ID, \n    w1 = Age, \n    w2 = Gender, \n    w3 = Education, \n    w4 = Smoke100, \n    a = PhysActive, \n    m = BMI, \n    y = Pulse,\n    y2 = Diabetes\n  )  %&gt;% \n  na.omit()    \n\n\n# Physical activity is a binary variable, dichotomized as 'Yes' or 'No'. \ntable(data$a)\n\n\n  No  Yes \n3260 3656 \n\n# check the distribution of outcome \nsummary(data$y)\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n  40.00   64.00   72.00   72.45   80.00  136.00 \n\nhist(data$y)\n\n\n\n\n\n\n\n# check the distribution of mediation\nsummary(data$m)\n\n   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. \n  15.02   24.10   27.80   28.80   32.22   81.25 \n\nhist(data$m)\n\n\n\n\n\n\n\n# check the education categories and relevel \ntable(data$w3)\n\n\n     8th Grade 9 - 11th Grade   College Grad    High School   Some College \n           417            858           2028           1447           2166 \n\ndata$w3 &lt;- relevel(factor(data$w3), ref = \"College Grad\")",
    "crumbs": [
      "Sessions",
      "<span class='chapter-number'>5</span>¬† <span class='chapter-title'>Traditional mediation analysis</span>"
    ]
  },
  {
    "objectID": "sessions/traditional-mediation-analysis.html#method-1-baron-kenny-the-product-method",
    "href": "sessions/traditional-mediation-analysis.html#method-1-baron-kenny-the-product-method",
    "title": "5¬† Traditional mediation analysis",
    "section": "5.3 Method 1: Baron & Kenny (the product method)",
    "text": "5.3 Method 1: Baron & Kenny (the product method)\nAccording to Baron and Kenny (1986) @baron_moderatormediator_1986, the following criteria need to be satisfied for a variable to be considered a mediator:\n\nThe exposure should be associated with the mediator.\nIn the model for the outcome that includes both the exposure and mediator: the mediator should be associated with the outcome.\nIn the model for the outcome that includes only the exposure: the exposure should be associated with the outcome.\nWhen controlling for the mediator, the association between the exposure and outcome should be reduced, with the strongest demonstration of mediation occurring when the path from the exposure to the outcome, when controlling for the mediator is zero.\n\nThe following shows the basic steps for mediation analysis suggested by Baron & Kenny.\n\n5.3.1 Step 1: Estimate the relationship between A on M (path a)\nThat is to check the relation between exposure (physical activity) and the mediator (BMI), which corresponds to criteria 1. A mediation makes sense only if A affects M. If A and M have no relationship, M is just a third variable that may or may not be associated with Y.\nAs the mediator is a continuous variable, we can build a linear regression model, adjusting for confounders on the pathway between A and M.\n\\((E(M|A=a, C=c)\\) = \\(\\beta_0\\) + \\(\\beta_1a\\) + \\(\\beta_2c\\) (3.1)\n\nfita &lt;- lm(m ~ a + w1 + w2 + w3 + w4, data = data)\nsummary(fita)\n\n\nCall:\nlm(formula = m ~ a + w1 + w2 + w3 + w4, data = data)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-15.624  -4.526  -1.104   3.431  50.612 \n\nCoefficients:\n                  Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)      28.467603   0.323923  87.884  &lt; 2e-16 ***\naYes             -1.643518   0.170461  -9.642  &lt; 2e-16 ***\nw1                0.012135   0.004819   2.518 0.011827 *  \nw2male            0.274867   0.160396   1.714 0.086633 .  \nw38th Grade       1.271955   0.365283   3.482 0.000501 ***\nw39 - 11th Grade  1.084541   0.281211   3.857 0.000116 ***\nw3High School     1.538987   0.234533   6.562 5.70e-11 ***\nw3Some College    1.381674   0.207826   6.648 3.19e-11 ***\nw4Yes            -1.056643   0.163957  -6.445 1.24e-10 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 6.586 on 6907 degrees of freedom\nMultiple R-squared:  0.0338,    Adjusted R-squared:  0.03268 \nF-statistic:  30.2 on 8 and 6907 DF,  p-value: &lt; 2.2e-16\n\n\nHere, we see that physical activity is negatively associated with BMI (an increase of 1 unit in physical activity is associated with a 1.64 unit decrease in BMI). Individuals who are physically active have an average BMI that is 1.64 kg/m2 lower than those who are inactive, holding all other variables constant.\n\n\n5.3.2 Step 2: Estimate the relationship between M on Y controlling for A (path b)\nThat is to build the model between BMI and pulse rates, controlling for physical activity. This step corresponds to criteria (ii).\n\\((E(Y|A=a, M=m, C=c) = \\theta_0 + \\theta_1a + \\theta_2m + \\theta4c\\) (3.2)\n\nfitb &lt;- lm(y ~ a + m + w1 + w2 + w3 + w4, data = data)\nsummary(fitb)\n\n\nCall:\nlm(formula = y ~ a + m + w1 + w2 + w3 + w4, data = data)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-33.455  -8.139  -0.965   7.022  72.177 \n\nCoefficients:\n                  Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)      73.580916   0.819142  89.827  &lt; 2e-16 ***\naYes             -1.422879   0.298167  -4.772 1.86e-06 ***\nm                 0.203864   0.020907   9.751  &lt; 2e-16 ***\nw1               -0.127155   0.008377 -15.178  &lt; 2e-16 ***\nw2male           -3.728063   0.278752 -13.374  &lt; 2e-16 ***\nw38th Grade       0.458752   0.635246   0.722 0.470218    \nw39 - 11th Grade  2.113914   0.489138   4.322 1.57e-05 ***\nw3High School     0.896878   0.408775   2.194 0.028264 *  \nw3Some College    1.388716   0.362258   3.834 0.000127 ***\nw4Yes             1.520113   0.285735   5.320 1.07e-07 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 11.44 on 6906 degrees of freedom\nMultiple R-squared:  0.07538,   Adjusted R-squared:  0.07418 \nF-statistic: 62.56 on 9 and 6906 DF,  p-value: &lt; 2.2e-16\n\n\nBMI is positively associated with pulse rates after adjusting for physical activity, each one-unit increase in BMI is associated with a 0.20-unit increase in pulse rate. Physical activity remains its negative association with pulse rates.\n\n\n5.3.3 Step 3: Estimate the relationship between A on Y (path c)\nThat is to build the model between physical activity and pulse levels, without adjusting for the BMI. The only difference between step 2 and step 3 is that mediator is not included in the model.\n\\((E(Y|A=a, C=c)\\) = \\(\\theta_0'\\) + \\(\\theta_1'a\\) + \\(\\theta4'c\\) (3.3)\n\nfitc &lt;- lm(y ~ a + w1 + w2 + w3 + w4, data = data)\nsummary(fitc)\n\n\nCall:\nlm(formula = y ~ a + w1 + w2 + w3 + w4, data = data)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-32.986  -8.122  -0.982   7.106  72.020 \n\nCoefficients:\n                 Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)      79.38443    0.56664 140.095  &lt; 2e-16 ***\naYes             -1.75793    0.29819  -5.895 3.92e-09 ***\nw1               -0.12468    0.00843 -14.789  &lt; 2e-16 ***\nw2male           -3.67203    0.28058 -13.087  &lt; 2e-16 ***\nw38th Grade       0.71806    0.63900   1.124  0.26117    \nw39 - 11th Grade  2.33501    0.49193   4.747 2.11e-06 ***\nw3High School     1.21062    0.41027   2.951  0.00318 ** \nw3Some College    1.67039    0.36356   4.595 4.41e-06 ***\nw4Yes             1.30470    0.28681   4.549 5.48e-06 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 11.52 on 6907 degrees of freedom\nMultiple R-squared:  0.06265,   Adjusted R-squared:  0.06157 \nF-statistic: 57.71 on 8 and 6907 DF,  p-value: &lt; 2.2e-16\n\n\nWe can see that physical activity is associated with lower pulse levels. Specifically, if someone is physically active (compared to someone who is not), pulse decreases by 1.76 units.\nBased on the models, we can estimate the direct effect and indirect effect:\n\ndirect effect = \\(\\theta_1\\)\n\nindirect effect = \\(\\beta_1 \\theta_2\\)\n\ntotal effect = \\(\\theta_1'\\)\n\nThe direct effect (\\(\\theta_1\\)) of physical activity on pulse levels can be assessed by the coefficient of physical activity in model b.\n\ndirect_ma &lt;- fitb$coefficients[2]\ndirect_ma\n\n     aYes \n-1.422879 \n\n\nThe indirect effect can be assessed by calculating the product of \\(\\beta_1\\) \\(\\theta_2\\). In this example, the indirect effect between physical activity and pulse levels through BMI is -0.34.\n\nindirect_ma &lt;- fita$coefficients[2] * fitb$coefficients[3]\nindirect_ma\n\n     aYes \n-0.335054 \n\n\nThe total effect (\\(\\theta_1'\\)) of physical activity on pulse levels can be assessed by the coefficient of physical activity in model c, which is -1.76. You might have noticed the total effect also equals the sum of the direct effect and indirect effect.\n\ntotal_ma &lt;- fitc$coefficients[2]\ntotal_ma\n\n     aYes \n-1.757933",
    "crumbs": [
      "Sessions",
      "<span class='chapter-number'>5</span>¬† <span class='chapter-title'>Traditional mediation analysis</span>"
    ]
  },
  {
    "objectID": "sessions/traditional-mediation-analysis.html#method-2-difference-approach",
    "href": "sessions/traditional-mediation-analysis.html#method-2-difference-approach",
    "title": "5¬† Traditional mediation analysis",
    "section": "5.4 Method 2: Difference approach",
    "text": "5.4 Method 2: Difference approach\nThe difference approach is more commonly used in epidemiology. And the rational of this approach is to compare the effect of A on Y without and with adding M in the models.\nIf a mediation effect exists, the effect of A on Y will be attenuated when M is included in the regression, indicating the effect of A on Y goes through M. If the effect of A on Y completely disappears, M fully mediates between A and Y (full mediation). If the effect of A on Y still exists, but in a smaller magnitude, M partially mediates between A and Y (partial mediation).\nBack to the example, the indirect effect will be the coefficient of physical activity in model c (without adjusting for m) minus the coefficient of physical activity in model b (adjusting for m), which equals to -0.34.\n\nindirect_mb &lt;- fitc$coefficients[2] - fitb$coefficients[2]\nindirect_mb\n\n     aYes \n-0.335054 \n\n\n\n\n\n\n\n\nNote\n\n\n\nThe algebraic equivalence of the indirect effect using the product method and the difference method will coincide for a continuous outcome on the difference scale (MacKinnon 1995). However, the two methods diverge when using a binary outcome and logistic regression. (MacKinnon and Dwyer 1993).\n\n\n\n\n\n\n\n\nNote\n\n\n\nRecall the four criteria suggested by Baron and Kenny. One of the criteria is that ‚ÄòPath C must be significantly different from 0 to ensure there is a total effect between X and Y‚Äô. However, this step can be controversial. Even if we don‚Äôt find a significant association between X and Y, we could proceed to the next step if we have a strong theoretical basis for their relationship.\n\n\n\n\n\n\n\n\nGroup work - 5 minutes\n\n\n\n\nDiscuss with your group about the two traditional approaches, did you get the same results?\nDiscuss the scenarios under which there might be no significant association between A and Y.\n\n\n\n\n5.4.1 Use mediation packages\nNow we have estimated the direct and indirect effect using the product and the difference methods.You might have noticed what you got so far are only point estimates, but what if you want to see if this mediation effect is statistically significant (different from zero or not)?\nTo do so, there are two main approaches: the Sobel test @sobel_asymptotic_1982 and bootstrapping @preacher_spss_2004.\nHere we will demonstrate that we can use the mediate() function in ‚Äòmediation‚Äô package @tingley_mediation_2014 to conduct mediation analysis. One of the very good options to conduct mediation analysis using the mediation package is we can get confidence interval by bootstrapping.\nLet‚Äôs load up the R packages.\n\nlibrary(mediation) # Mediation package\n\nLoading required package: MASS\n\n\n\nAttaching package: 'MASS'\n\n\nThe following object is masked from 'package:dplyr':\n\n    select\n\n\nLoading required package: Matrix\n\n\n\nAttaching package: 'Matrix'\n\n\nThe following objects are masked from 'package:tidyr':\n\n    expand, pack, unpack\n\n\nLoading required package: mvtnorm\n\n\nLoading required package: sandwich\n\n\nmediation: Causal Mediation Analysis\nVersion: 4.5.0\n\n\nmediate() takes two model objects as input (\\(A \\rightarrow M\\) and \\(A + M \\rightarrow Y\\)) and we need to specify which variable is an IV (treatment) and a mediator (mediator). For bootstrapping, set boot = TRUE and sims to at least 500.\n\nset.seed(260524)\n\n# Fit mediator model\nlm_m &lt;- lm(m ~ a + w1 + w2 + w3 + w4, data = data)\n# Fit outcome model\nlm_y &lt;- glm(y ~ a + m + w1 + w2 + w3 + w4, data = data)\n# Run mediation analysis\nresults &lt;- mediate(lm_m, lm_y, treat = \"a\", mediator = \"m\", boot = TRUE, sims = 10) #set simulation for 10 for time effecacy\n\nWarning in mediate(lm_m, lm_y, treat = \"a\", mediator = \"m\", boot = TRUE, :\ntreatment and control values do not match factor levels; using No and Yes as\ncontrol and treatment, respectively\n\n\nRunning nonparametric bootstrap\n\nsummary(results)\n\n\nCausal Mediation Analysis \n\nNonparametric Bootstrap Confidence Intervals with the Percentile Method\n\n               Estimate 95% CI Lower 95% CI Upper p-value    \nACME             -0.335       -0.469        -0.25  &lt;2e-16 ***\nADE              -1.423       -1.731        -1.11  &lt;2e-16 ***\nTotal Effect     -1.758       -2.049        -1.40  &lt;2e-16 ***\nProp. Mediated    0.191        0.155         0.29  &lt;2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nSample Size Used: 6916 \n\n\nSimulations: 10 \n\n\n\nADE stands for average direct effects. It describes the direct effect of the A on the Y when controlling for the mediator. Note this estimate is the same as the coefficient We got in the product and difference method. But be aware we are able to get confidence interval and significance levels for the indirect effect, not only its two individual parts by bootstrapping. This is something we need for reporting the mediation.\nACME stands for average causal mediation effects. This is the indirect effect of the IV on the DV that goes through the mediator. Note that ACME estimated to be -0.34, which is the same to the traditional approached we just used.\nTotal Effect stands for the total effect (direct + indirect) of the IV onto the DV. We can also get it by adding the ACME () and the ADE () to receive the total effect.\nProp. Mediated describes the proportion of the effect of the IV on the DV that goes through the mediator. It‚Äôs calculated by dividing the ACME (-0.34) by the total effect (-1.76) and yields 0.19. The result suggests the mediator (BMI) explains 19% proportion of the effect of physical activity on pulse rate . We will talk more about proportion mediation in the next session.\n\n\n# We can also plot the estimates\nplot(results)\n\n\n\n\n\n\n\n\nFor details of the mediate() package, please refer to @tingley_mediation_2014.",
    "crumbs": [
      "Sessions",
      "<span class='chapter-number'>5</span>¬† <span class='chapter-title'>Traditional mediation analysis</span>"
    ]
  },
  {
    "objectID": "sessions/traditional-mediation-analysis.html#limitations-of-the-traditional-approach",
    "href": "sessions/traditional-mediation-analysis.html#limitations-of-the-traditional-approach",
    "title": "5¬† Traditional mediation analysis",
    "section": "5.5 Limitations of the traditional approach",
    "text": "5.5 Limitations of the traditional approach\n\nNon-linearity\nInteractions\nMultiple mediators",
    "crumbs": [
      "Sessions",
      "<span class='chapter-number'>5</span>¬† <span class='chapter-title'>Traditional mediation analysis</span>"
    ]
  },
  {
    "objectID": "sessions/traditional-mediation-analysis.html#when-can-we-use-the-traditional-approach",
    "href": "sessions/traditional-mediation-analysis.html#when-can-we-use-the-traditional-approach",
    "title": "5¬† Traditional mediation analysis",
    "section": "5.6 When can we use the traditional approach",
    "text": "5.6 When can we use the traditional approach\nWhen fulfill the criteria, simple tools like regression can be used to estimate a causal mediation effect:\n\nno unmeasured confounding\nno exposure-mediator interaction\nlinear relationship\nrare binary outcome",
    "crumbs": [
      "Sessions",
      "<span class='chapter-number'>5</span>¬† <span class='chapter-title'>Traditional mediation analysis</span>"
    ]
  },
  {
    "objectID": "sessions/traditional-mediation-analysis.html#references",
    "href": "sessions/traditional-mediation-analysis.html#references",
    "title": "5¬† Traditional mediation analysis",
    "section": "5.7 References",
    "text": "5.7 References",
    "crumbs": [
      "Sessions",
      "<span class='chapter-number'>5</span>¬† <span class='chapter-title'>Traditional mediation analysis</span>"
    ]
  },
  {
    "objectID": "sessions/causal-mediation-analysis-introduction.html",
    "href": "sessions/causal-mediation-analysis-introduction.html",
    "title": "6¬† Introduction to causal mediation analysis",
    "section": "",
    "text": "6.1 What is a cause?\nIn this session we will go over fundamental concepts of causal inference in general and then focus more specifically on causal mediation analysis.\nWe employ causal inference constantly in our daily lives. Consider a simple example: when you press a light switch, you expect the light to turn on. Or in another scenario, you anticipate that performing action A will result in outcome Y. In some instances, we can identify deterministic relationships where action A will lead to outcome Y. While these straightforward cause-and-effect relationships are intuitive and help us navigate the world, they become significantly more complex when we explore health outcomes.",
    "crumbs": [
      "Sessions",
      "<span class='chapter-number'>6</span>¬† <span class='chapter-title'>Introduction to causal mediation analysis</span>"
    ]
  },
  {
    "objectID": "sessions/causal-mediation-analysis-introduction.html#what-is-a-cause",
    "href": "sessions/causal-mediation-analysis-introduction.html#what-is-a-cause",
    "title": "6¬† Introduction to causal mediation analysis",
    "section": "",
    "text": "Notation\n\n\n\nA = received treatment/intervention/exposure (e.g., 1 = intervention, 0 = no intervention)\nY = observed outcome (e.g., 1 = developed the outcome, 0 = no outcome)\n\\(Y^{a=1}\\) = Counterfactual outcome under treatment a=1 (i.e., the outcome had everyone, counter to the fact, received treatment a = 1)\n\\(Y^{a=0}\\) = Counterfactual outcome under treatment a =0 (i.e., the outcome had everyone, counter to the fact, received treatment a = 0)\n\n\n\n6.1.1 Individual causal effect\nWhen investigating health outcomes, we would ideally want to know if you do X, then Y will happen. We could have a specific question:\n\nWill eating more red meat give me higher blood glucose in 1 year?\n\nTo answer this question we would ideally have you consume more red meat over 1 year and measure your blood glucose levels. Then, we would turn back time, and make you eat something else over 1 year and then measure your blood glucose levels again. If there is a difference between your two outcomes, then we say there is a causal effect.\nBut we can never do this in the real world.\n\n\n6.1.2 Average causal effect\nInstead, we can perform a randomized controlled trial. We now ask a slightly different question:\n\nWill eating more red meat give adults higher blood glucose in 1 year?\n\nWe can randomely assigning one group to consume more red meat and the other group to consume more of something else over 1 year. Then we compare the average blood glucose levels after 1 year in each of the groups. If there is a difference, we could say there is an average causal effect.\n\n\n\n\n\n\nNotation\n\n\n\nWe now modify the terms a little.\n\\(E[Y^{a=1}]\\) the average counterfactual outcome, had all subjects in the population received treatment a = 1.\n\\(Pr[Y^{a=1}]\\) the proportion of subjects that would have developed the outcome Y had all subjects in the population of interest received treatment a = 1.\n\\(E[Y^{a=0}]\\) the average counterfactual outcome, had all subjects in the population received no treatment a = 0.\n\\(Pr[Y^{a=0}]\\) the proportion of subjects that would have developed the outcome Y had all subjects in the population of interest received no treatment a = 0.\n\n\n\n\n6.1.3 Definition of a causal effect\nMore formally we can now define a causal effect @hernan_definition_2004:\n\\(E[Y^{a=1} = 1] - E[Y^{a=0} = 1] \\ne 0\\)",
    "crumbs": [
      "Sessions",
      "<span class='chapter-number'>6</span>¬† <span class='chapter-title'>Introduction to causal mediation analysis</span>"
    ]
  },
  {
    "objectID": "sessions/causal-mediation-analysis-introduction.html#association-vs-causation",
    "href": "sessions/causal-mediation-analysis-introduction.html#association-vs-causation",
    "title": "6¬† Introduction to causal mediation analysis",
    "section": "6.2 Association vs causation",
    "text": "6.2 Association vs causation\nWhat makes it complicated to estimate a causal effect is that we cannot observe the outcome under different treatments.\nWhen we only have a subset of the outcomes, we have an association. This is illustrated in Figure¬†6.1.\n\n\n\n\n\n\nFigure¬†6.1: Causation vs association. From @hernan_definition_2004\n\n\n\nIf we want to infer a causal effect (i.e., what would have happened, had everyone done A=1 vs A=0), we need three assumptions to be fulfilled:\n\nExchangeability\nConsistency\nPositivity\n\n\n\n\n\n\nCausal Assumptions\n\n\n\n\nExchangeability\n\nThe risk of the outcome in A = 1 would have been the same as the risk of the outcome in A = 0, had those in A = 1 received A = 0.\nThink about a randomized trial where you, by mistake, give the intervention to the other group. The effect should be the same as the one you would have observed had the groups been correct.\nWe can also have conditional exchangeability. The risk is similar in subsets of the population. That could be within the levels of a variable W (e.g., education).\n\nConsistency\n\nThe treatments under comparison are well-defined and correspond to the versions of treatment observed in the data:\n\nPrecise definition of \\(Y^a\\) via a\nLink counterfactual outcomes with observed outcomes\n\n\\(Y^a = Y\\) for every individual with A = a.\nThe observed outcome for all treated equals the outcome if they had received the treatment.\n\nPositivity\n\nThe probability of receiving every value of treatment conditional on L is greater than zero. In other words, there must be a probability of being assigned to each treatment level.\nImage if we don‚Äôt have anyone with A = 0 among those with L=1 (e.g. long education), then we cannot estimate the conditional probability of the outcome.",
    "crumbs": [
      "Sessions",
      "<span class='chapter-number'>6</span>¬† <span class='chapter-title'>Introduction to causal mediation analysis</span>"
    ]
  },
  {
    "objectID": "sessions/causal-mediation-analysis-introduction.html#causal-mediation-analysis",
    "href": "sessions/causal-mediation-analysis-introduction.html#causal-mediation-analysis",
    "title": "6¬† Introduction to causal mediation analysis",
    "section": "6.3 Causal mediation analysis",
    "text": "6.3 Causal mediation analysis\n\n\n\n\n\n\nrecall the major limations of tranditional mediation methods:\n\n\n\n\nNon-linearity\nInteractions\nConfounding\nMultiple mediators\n\n\n\nCausal mediation analysis is an extension of the traditional approach by:\n\n\n\n\n\n\nNote\n\n\n\n\nOutlining all confounding assumptions needed\nHandling non-linearity and interaction\nClearly defining estimands of interest",
    "crumbs": [
      "Sessions",
      "<span class='chapter-number'>6</span>¬† <span class='chapter-title'>Introduction to causal mediation analysis</span>"
    ]
  },
  {
    "objectID": "sessions/causal-mediation-analysis-introduction.html#confounding-assumptions",
    "href": "sessions/causal-mediation-analysis-introduction.html#confounding-assumptions",
    "title": "6¬† Introduction to causal mediation analysis",
    "section": "6.4 Confounding assumptions",
    "text": "6.4 Confounding assumptions\nBy using DAGs, the assumptions about confounding are made much more explicit. DAG under no mediator-outcome relation affected by treatment:\n\n\n\n\n\n\nWe can see that we not only have to take confounding between the treatment and outcome into account, but we also have to take mediator-outcome (\\(A \\leftarrow W \\rightarrow Y\\)) confounding into account.\nIn addition, we can have a more complicated situation where the treatment also impacts another mediator that is also a mediator-outcome confounder.\nBelow DAG shows where the mediator-outcome relation is affected by treatment:\n\n\n\n\n\n\nFrom the DAG rules, we have a special problem that we cannot solve with traditional regression approaches. If we adjust for W2 we open a backdoor path by adjusting for the collider \\(W1 \\rightarrow W2 \\leftarrow A\\). We will work on how to solve this problem later in the course.",
    "crumbs": [
      "Sessions",
      "<span class='chapter-number'>6</span>¬† <span class='chapter-title'>Introduction to causal mediation analysis</span>"
    ]
  },
  {
    "objectID": "sessions/causal-mediation-analysis-introduction.html#non-linearity-and-interactions",
    "href": "sessions/causal-mediation-analysis-introduction.html#non-linearity-and-interactions",
    "title": "6¬† Introduction to causal mediation analysis",
    "section": "6.5 Non-linearity and interactions",
    "text": "6.5 Non-linearity and interactions\nNeither the product method nor the difference method in traditional mediation analysis can effectively account for interaction effects or non-linear relationships between variables.\nCausal mediation analysis addresses these limitations through more sophisticated approaches. Specifically, it can:\n\nUtilize regression-based methods and alternative causal inference techniques like g-computation\nFundamentally differ from traditional approaches by:\n\nConstructing a comprehensive causal model that explicitly incorporates non-linear relationships and interaction effects\nArtificially manipulating the data to set the treatment and the mediator to certain values\nPredicting outcomes using the developed causal model\nComparing predicted outcomes to understand causal mechanisms\n\n\nNote: additional approaches also exists, but we will not focus on these in this course.",
    "crumbs": [
      "Sessions",
      "<span class='chapter-number'>6</span>¬† <span class='chapter-title'>Introduction to causal mediation analysis</span>"
    ]
  },
  {
    "objectID": "sessions/causal-mediation-analysis-introduction.html#causal-mediation-estimation",
    "href": "sessions/causal-mediation-analysis-introduction.html#causal-mediation-estimation",
    "title": "6¬† Introduction to causal mediation analysis",
    "section": "6.6 Causal mediation estimation",
    "text": "6.6 Causal mediation estimation\nCounterfactual-based direct and indirect effects can be estimated from regression models, provided that the no confounding assumption hold. To be able to do so, we need a model for the mediator and a model for the outcome.\nModel for the mediator:\n\\(E(M|A = a, W = w) = \\beta_0 + \\beta_1a + \\beta'_2w\\)\nModel for the outcome:\n\\(E(Y|A = a, M = m, W = w) = \\sigma_0 + \\sigma_1a + \\sigma_2m + \\sigma_3am + \\sigma'_4w\\)\nFrom these two regression models we can estimate the CDE, NDE and NIE.",
    "crumbs": [
      "Sessions",
      "<span class='chapter-number'>6</span>¬† <span class='chapter-title'>Introduction to causal mediation analysis</span>"
    ]
  },
  {
    "objectID": "sessions/causal-mediation-analysis-introduction.html#example",
    "href": "sessions/causal-mediation-analysis-introduction.html#example",
    "title": "6¬† Introduction to causal mediation analysis",
    "section": "6.7 Example",
    "text": "6.7 Example\nThe example here include a continuous treatment, mediator and outcome. We use these equations on an additive scale because it is easier to explain the intuition behind the estimands. Similar equations exist for other types and combinations of variables.\n\n\n‚îÄ‚îÄ Attaching core tidyverse packages ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ tidyverse 2.0.0 ‚îÄ‚îÄ\n‚úî dplyr     1.1.4     ‚úî readr     2.1.5\n‚úî forcats   1.0.0     ‚úî stringr   1.5.1\n‚úî ggplot2   3.5.1     ‚úî tibble    3.2.1\n‚úî lubridate 1.9.4     ‚úî tidyr     1.3.1\n‚úî purrr     1.0.4     \n‚îÄ‚îÄ Conflicts ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ tidyverse_conflicts() ‚îÄ‚îÄ\n‚úñ dplyr::filter() masks stats::filter()\n‚úñ dplyr::lag()    masks stats::lag()\n‚Ñπ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\n\n\n# This includes readr, or use library(readr) specifically\nnhanes &lt;- read_csv(here::here(\"data/NHANES.csv\")) \n\nRows: 10000 Columns: 76\n‚îÄ‚îÄ Column specification ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\nDelimiter: \",\"\nchr (31): SurveyYr, Gender, AgeDecade, Race1, Race3, Education, MaritalStatu...\ndbl (45): ID, Age, AgeMonths, HHIncomeMid, Poverty, HomeRooms, Weight, Lengt...\n\n‚Ñπ Use `spec()` to retrieve the full column specification for this data.\n‚Ñπ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n# keep the variables used in the analyses \ndata &lt;- nhanes %&gt;% \n  dplyr::select(ID, \n                w1 = Age, \n                w2 = Gender, \n                w3 = Education, \n                w4 = Smoke100, \n                a = PhysActive,  # this is the exposure\n                m = BMI,         # this is the mediator\n                y = Pulse,       # this is the outcome\n                y2 = Diabetes ) %&gt;% \n  na.omit()\n\nWe can now run a model for the mediator only adjusting for a single variable. In practice you would adjust for many more variables to satisfy the confounding assumptions.\n\nlm_m &lt;- lm(m ~ a + w1 , data = data)\nsummary(lm_m)\n\n\nCall:\nlm(formula = m ~ a + w1, data = data)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-14.741  -4.578  -1.086   3.421  51.417 \n\nCoefficients:\n             Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept) 29.440321   0.267707 109.972   &lt;2e-16 ***\naYes        -1.883085   0.162184 -11.611   &lt;2e-16 ***\nw1           0.007546   0.004793   1.575    0.115    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 6.627 on 6913 degrees of freedom\nMultiple R-squared:  0.02101,   Adjusted R-squared:  0.02073 \nF-statistic: 74.19 on 2 and 6913 DF,  p-value: &lt; 2.2e-16\n\n\nHere, we see that physical activity (a) is associated with lower pulse (y).\nNow, we run the model for the outcome, notice we have included an interaction term.\n\nlm_y &lt;- lm(y ~ a + m + a:m + w1 , data = data)\nsummary(lm_y)\n\n\nCall:\nlm(formula = y ~ a + m + a:m + w1, data = data)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-32.464  -8.254  -1.007   7.254  68.847 \n\nCoefficients:\n             Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept) 75.200976   0.954088  78.820  &lt; 2e-16 ***\naYes        -5.625108   1.252664  -4.491 7.22e-06 ***\nm            0.143529   0.028201   5.090 3.68e-07 ***\nw1          -0.122102   0.008402 -14.533  &lt; 2e-16 ***\naYes:m       0.125536   0.042449   2.957  0.00311 ** \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 11.61 on 6911 degrees of freedom\nMultiple R-squared:  0.04701,   Adjusted R-squared:  0.04646 \nF-statistic: 85.23 on 4 and 6911 DF,  p-value: &lt; 2.2e-16\n\n\nIn this model we can see:\n\nhigher physical activity (a) decreases pulse, independent of the mediator (BMI)\nexcess body weight (BMI) is associated with higher pulse, independent of physical activity\nthere is statistically significant interaction between physical activity (a) and BMI (m)\nBased on the coefficients of these two models, we can now estimate the different effects.\n\nThe equations are from @valeri_mediation_2013 and @vanderweele_unification_2014.\n\n6.7.1 Controlled direct effect\nThe controlled direct effect can be obtained using this formula based on the regression coefficients:\n\\(CDE(m) = (\\sigma_1 + \\sigma_3*m)(a - a^*)\\)\n\\(a^*\\) is for a change from level \\(a^*\\) (=control) to level \\(a\\) (=intervention).\nFor the controlled direct effect we set m to a specific value.\nLet‚Äôs look at the distribution of m (BMI).\n\ndata %&gt;%\n  select(m) %&gt;%\n  summary()\n\n       m        \n Min.   :15.02  \n 1st Qu.:24.10  \n Median :27.80  \n Mean   :28.80  \n 3rd Qu.:32.22  \n Max.   :81.25  \n\nmedian_m &lt;- round(median(data$m), digits = 1)\n\nIn this example we will set it to the median of BMI, at 27.8 which is a low level. You can also try to set BMI to 25kg/m2.\n\nCDE_m &lt;- (lm_y$coefficients[2] + lm_y$coefficients[5] * median_m) * (1 - 0)\nround(as.numeric(CDE_m), digits = 2)\n\n[1] -2.14\n\n\nThe CDE is how much the outcome, here the pulse, would change on average if the mediator, here BMI, were fixed at level (m = 27.8) uniformly in the population but the treatment, physical activity, was changed from 0 to 1.\nThe CDE answer the question, what would be the effect of A on Y, when fixing M at a specific value for everyone in the population @wang_g-computation_2015?\n\n\n6.7.2 (Pure) natural direct effect\nPNDE can be obtained using this formula:\n\\(PNDE = (\\sigma_1 + \\sigma_3 * (\\beta_0 + \\beta_1*a^* + \\beta'_2*w))(a - a^*)\\)\nWe set the value for the confounder w1 for the interaction to be the mean value of w1.\n\nmean_w1 &lt;- mean(data$w1)\nmean_w1\n\n[1] 47.17467\n\n\nThen we calculate the PNDE.\n\nPNDE &lt;- (lm_y$coefficients[2] + (lm_y$coefficients[5] * (lm_m$coefficients[1] + lm_m$coefficients[2] * 0 + lm_m$coefficients[3] * mean_w1))) * (1 - 0)\nround(as.numeric(PNDE), digits = 2)\n\n[1] -1.88\n\n\nThe PNDE is how much the outcome, pulse, would change if the treatment a, physical activity, was set at 1 versus 0 but for each individual the mediator was kept at the level it would have taken, for that individual, in the absence of the exposure.\nhow pulse rate would change if the treatment (or exposure) physically active (a=1) was set at 1 versus 0, while for each individual the mediator (BMI) was kept at the level it would naturally be in the absense of physical activity(a=0).\nIn other words, it measures the direct effect of physical activity on pulse rate that doesn‚Äôt work through changing BMI.\n\n\n6.7.3 (Total) natural direct effect\nTNDE can be obtained by this formula:\n\\(TNDE = (\\sigma_1 + \\sigma_3 * (\\beta_0 + beta_1*a + \\beta'_2*w))(a - a^*)\\)\n\nTNDE &lt;- (lm_y$coefficients[2] + (lm_y$coefficients[5] * (lm_m$coefficients[1] + lm_m$coefficients[2] * 1 + lm_m$coefficients[3] * mean_w1))) * (1 - 0)\n\nround(as.numeric(TNDE), digits = 2)\n\n[1] -2.12\n\n\nHere, the value of M is enabled to act (as opposed to the PNDE). Here we see a little lower pulse rate, this means we‚Äôre measuring the direct effect of physical activity on pulse rate while allowing BMI to be at the level it would naturally be with physical activity (a=1).\nThe TNDE asks the question: ‚Äúto what extent does physical activity cause lower pulse via pathways other than through BMI, allowing BMI to boost up or tune down such effect at the same time?‚Äù @wang_g-computation_2015\n\n\n6.7.4 Total natural indirect effect\nThe TNIE can be obtained by this formula:\n\\(TNIE = (\\sigma_2 * \\beta_1 + \\sigma_3 * \\beta_1 * a)(a - a^*)\\)\n\nTNIE &lt;- ((lm_y$coefficients[3] * lm_m$coefficients[2]) + (lm_y$coefficients[5] * lm_m$coefficients[2] * 1)) * (1 - 0)\n\nround(as.numeric(TNIE), digits = 2)\n\n[1] -0.51\n\n\nThe TNIE is how much the outcome would change on average if the treatment was fixed at level a = 1 but the mediator was changed from the level it would take if a* = 0 (physical inactive) to the level it would take if a =1 (physical active).\nNote that exposure has to have an effect on M otherwise this will be zero.\nThe TNIE asks the question: to what extent does physical activity cause pulse via BMI and the possible interaction between physical activity and BMI in affecting pulse rate? In other words, the effect of exposure that ‚Äòwould be prevented if the exposure did not cause the mediator‚Äô (i.e., the portion of the effect for which mediation is ‚Äònecessary‚Äô) @wang_g-computation_2015.\nThis is often the effect we are interested in in biomedical research for questions regarding mediation.\n\n\n6.7.5 Pure natural indirect effect\nThe PNIE can be obtained by this formula:\n\\(PNIE = (\\sigma_2 * \\beta_1 + \\sigma_3 * \\beta_1 * a^*)(a - a^*)\\)\n\nPNIE &lt;- ((lm_y$coefficients[3] * lm_m$coefficients[2]) + (lm_y$coefficients[5] * lm_m$coefficients[2] * 0)) * (1 - 0)\n\nround(as.numeric(PNIE), digits = 2)\n\n[1] -0.27\n\n\nThe PNIE is different from the TNIE because it does not include the interaction effect. We estimate the effect of red meat on inflammation and then subsequent effect of inflammation on blood glucose.\nThe PNIE answer the question: ‚Äúto what extent does physical activity cause lower pulse rate via BMI only (i.e., due to physical activity affecting BMI and subsequently, BMI affecting pulse rate), not accounting for the possible interaction between physical activity and BMI? In other words, the effect that the exposure would have had if ‚Äòits only action were to cause the mediator‚Äô (i.e., the portion of the effect for which mediation is ‚Äò‚Äôsufficient‚Äô‚Äô)‚Äù @wang_g-computation_2015.\n\n\n6.7.6 Total effect\nThe total effect can be decomposed as:\n\\(TE = PNDE + TNIE\\)\n\nTE &lt;- PNDE + TNIE\n\nround(as.numeric(TE), digits = 2)\n\n[1] -2.39\n\n\nThis is the overall effect of red meat on blood glucose levels. Higher red meat is associated with higher blood glucose.\n\n\n6.7.7 Proportion mediation\nFrom this, we can calculate the proportion mediated.\n\\(PM = \\frac{TNIE}{TE}\\)\n\nPM &lt;- TNIE / TE\n\nas.numeric(PM) * 100\n\n[1] 21.18849\n\n\n26% of the association between physical activity and pulse rate is mediated by M, BMI.",
    "crumbs": [
      "Sessions",
      "<span class='chapter-number'>6</span>¬† <span class='chapter-title'>Introduction to causal mediation analysis</span>"
    ]
  },
  {
    "objectID": "sessions/causal-mediation-analysis-introduction.html#defining-estimands",
    "href": "sessions/causal-mediation-analysis-introduction.html#defining-estimands",
    "title": "6¬† Introduction to causal mediation analysis",
    "section": "6.8 Defining estimands",
    "text": "6.8 Defining estimands\nImagine we have a hypothetical randomized controlled trial where we give participants treatment or no treatment on a specific outcome Y.\n\\(Y^{a=1} - Y^{a=0}\\)\nFor mediation, we are also interested in the effect of a mediator on this pathway. Now image that we also intervene on the mediator in a new hypothetical randomized controlled trial.\n\\(Y^{m=1} - Y^{m=0}\\)\nNow consider if we, in the same trial, could intervene on both because we are interested in whether treatment causes the outcome because it causes the mediator.\n\n\n\n\n\n\nNotation\n\n\n\n\\(Y^a\\) = a subject‚Äôs outcome if treatment A were set, possible contrary to fact, to a\n\\(M^a\\) = a subject‚Äôs value of the mediator if the exposure A were set to the value of a\n\\(Y^{a,m}\\) = a subject‚Äôs outcome if A were set to a and M were set to m\n\\(Y^{a,M_a}\\) = a subject‚Äôs outcome if A were set to a and M were set the value m would have had had a been set to a. Note, this is a nested counterfactual\n\n\nWe can now define these estimands:\n\nthe controlled direct effect (CDE)\nnatural direct effect (NDE)\nnatural indirect effect (NIE)\n\n\n6.8.1 Controlled direct effect\nThe effect of A on Y not mediated through M. Fixing the value of M to m.\n\\(Y^{a=1,m}\\) - \\(Y^{a=0,m}\\)\nWe intervene on \\(a\\) but fix \\(m\\) to a certain value. The CDE is how much the outcome would change on average if the mediator were fixed at level m uniformly in the population but the treatment were changed from 0 to 1.\nThis could be relevant in the context of a change in a policy that impacted the mediator for everyone. For instance, if air pollution was a mediator between physical activity and cardiovascular disease risk. If a new policy would change the level of air pollution for all while we implement an intervention to increase biking in the city.\nThis effect is not used that often. But can be highly relevant in some situations.\n\n\n6.8.2 (Pure) Natural direct effect\nThe effect that would remain, if we were to disable the pathway from exposure to mediator.\n\\(Y^{a=1,M_a=0}\\) - \\(Y^{a=0,M_a=0}\\)\nThe PNDE is how much the outcome would change if the exposure was set at a = 1 versus a* = 0 but for each individual the mediator was kept at the level it would have taken, for that individual, in the absence of the exposure.\nNote that the word ‚Äúnatural‚Äù refers to the nested counterfactual, the level the mediator would have taken in the absence of exposure. What it would naturally have been in the absence of exposure.\n\n\n6.8.3 Total natural direct effect\n\\(Y^{a=1,M_a=1}\\) - \\(Y^{a=0,M_a=1}\\)\nNote, different from above in that the mediator is kept at the level it would have taken in the presence of the exposure.\n\n\n6.8.4 (Total) Natural indirect effect\nThe effect of the mediator pathway.\n\\(Y^{a=1,M_a=1}\\) - \\(Y^{a=1,M_a=0}\\)\nThe NIE is how much the outcome would change on average if the exposure were fixed at level a = 1 but the mediator were changed from the level it would take if a* = 0 to the level it would take if a = 1.\nNote that exposure has to have an effect on M otherwise this will be zero.\n\n\n6.8.5 Pure natural indirect effect\n\\(Y^{a=0,M_a=1}\\) - \\(Y^{a=0,M_a=0}\\)\nNote, this is different from the TNIE in that the exposure is set to no intervention.\n\n\n6.8.6 Interaction effects\nMore information on the interaction effects can be found in @vanderweele_unification_2014.\nReference interaction:\n\\(INT_{ref} = PNDE - CDE\\)\nMediation interaction:\n\\(INT_{med} = TNIE - PNIE\\)\n\n\n6.8.7 Effect decomposition\nUsing the causal inference framework also allow for effect decomposition, even when there are interaction and non-linearity.\nEffect decomposition is important when we want to assess relative contributions such as the proportion mediated and eliminated.\nTE = PNDE + TNIE = TNDE + PNIE\nMore information about decomposition of effects can be found in @vanderweele_unification_2014.\n\n\n6.8.8 Proportions\nProportion mediated:\n\\(PM = NIE / TE\\)\nProportion eliminated:\n\\(PE = (TE-CDE(m)) / TE\\)",
    "crumbs": [
      "Sessions",
      "<span class='chapter-number'>6</span>¬† <span class='chapter-title'>Introduction to causal mediation analysis</span>"
    ]
  },
  {
    "objectID": "sessions/causal-mediation-analysis-introduction.html#references",
    "href": "sessions/causal-mediation-analysis-introduction.html#references",
    "title": "6¬† Introduction to causal mediation analysis",
    "section": "6.9 References",
    "text": "6.9 References",
    "crumbs": [
      "Sessions",
      "<span class='chapter-number'>6</span>¬† <span class='chapter-title'>Introduction to causal mediation analysis</span>"
    ]
  },
  {
    "objectID": "appendix/reading-list.html",
    "href": "appendix/reading-list.html",
    "title": "Appendix A ‚Äî reading",
    "section": "",
    "text": "A.1 Reading materials\nJudd, C. M., & Kenny, D. A. (1981).¬† Process analysis: Estimating mediation in treatment evaluations.¬†Evaluation Review, 5,¬†602-619\nBaron, R. M., & Kenny, D. A. (1986).¬† The moderator-mediator variable distinction in social psychological research: Conceptual, strategic and statistical considerations.¬†Journal of Personality and Social Psychology, 51, 1173-1182\nGreenland, S., Pearl, J., & Robins, J. M. (1999). Causal diagrams for epidemiologic research.¬†Epidemiology, 37-48.\nMacKinnon, D. P. (2008).¬†Introduction to statistical mediation analysis. New York: Erlbaum.\nSelig, J. P., & Preacher, K. J. (2009). Mediation models for longitudinal data in developmental research.¬†Research in Human Development,¬†6(2),144-164.\nVanderWeele, T. J. & Vansteelandt, S. (2009). Conceptual issues concerning mediation, interventions and composition. Statistics and Its Interface, 2(4), 457-468.\nPreacher, K. J., & Kelley, K.¬† (2011).¬† Effect size measures for mediation models:¬† Quantitative strategies for communicating indirect effects.¬†Psychological Methods, 16, 93-115.\nHayes, A. F. (2013).¬†Introduction to mediation, moderation, and conditional process analysis: A regression-based approach. Guilford Press.\nMore (Adjustment) is Not Always Better: How Directed Acyclic Graphs Can Help Researchers Decide Which Covariates to Include in Models for the Causal Relationship Between an Exposure and an Outcome in Observational Research https://pmc.ncbi.nlm.nih.gov/articles/PMC8974490/",
    "crumbs": [
      "Appendices",
      "<span class='chapter-number'>A</span>¬† <span class='chapter-title'>reading</span>"
    ]
  }
]